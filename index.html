<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>My Valentine üíñ</title>

<style>
:root{
  --pink:#ec4899;
  --rose:#fb7185;
  --bg1:#fde7f3;
  --bg2:#fbcfe8;
  --card:#fffafc;
  --text:#374151;
  --muted:#6b7280;
  --border:#f3c1d9;
  --goodBg:#fff;
  --goodBorder:#f472b6;
  --goodText:#be185d;
  --badBg:#fff;
  --badBorder:#fb7185;
  --badText:#7c2d12;
  --errBg:#111827;
  --errBorder:#fb7185;
  --errText:#fecaca;
}

*{
  box-sizing:border-box;
  font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  padding:18px;
  background:
    radial-gradient(circle at 20% 20%, #fff 0%, transparent 35%),
    radial-gradient(circle at 80% 10%, #fff 0%, transparent 30%),
    linear-gradient(135deg, var(--bg1), var(--bg2));
  overflow:hidden;
}

/* Floating hearts */
.heart{
  position:absolute;
  color:#f472b6;
  font-size:18px;
  animation: float 9s linear infinite;
  opacity:.55;
  user-select:none;
}
@keyframes float{
  from{ transform:translateY(110vh) translateX(0); }
  to{ transform:translateY(-10vh) translateX(22px); }
}

.wrap{ width:min(640px,100%); z-index:1; }

.topbar{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  margin-bottom:14px;
}

.scorebar{
  flex:1;
  background:#fff;
  border-radius:999px;
  padding:10px 12px;
  text-align:center;
  font-weight:900;
  color:var(--pink);
  border:1px solid var(--border);
}

/* Music button */
.musicBtn{
  background:#fff;
  border:1px solid var(--border);
  border-radius:999px;
  padding:10px 12px;
  font-weight:900;
  cursor:pointer;
  color:#be185d;
  white-space:nowrap;
}
.musicBtn:active{ transform:scale(.98); }

.card{
  background:var(--card);
  border-radius:22px;
  padding:18px;
  box-shadow:0 20px 45px rgba(236,72,153,.22);
  border:1px solid var(--border);
  position:relative;
  overflow:hidden;
}

/* Message banner ABOVE question */
.msg{
  width:100%;
  border-radius:16px;
  padding:12px 14px;
  font-weight:900;
  text-align:center;
  margin-bottom:12px;
  opacity:0;
  transform: translateY(-4px);
  transition: .18s ease;
  border:2px solid transparent;
  white-space: pre-line;
}
.msg.show{ opacity:1; transform: translateY(0); }
.msg.good{ background:var(--goodBg); color:var(--goodText); border-color:var(--goodBorder); }
.msg.bad{ background:var(--badBg); color:var(--badText); border-color:var(--badBorder); }
.msg.error{ background:var(--errBg); color:var(--errText); border-color:var(--errBorder); font-size:14px; }

h2{
  text-align:center;
  font-size:24px;
  color:#be185d;
  margin: 4px 0 12px;
}

.imgBox{
  width:230px;
  height:230px;
  margin:14px auto;
  border-radius:18px;
  overflow:hidden;
  border:2px solid #f9a8d4;
  background:#fff;
  display:grid;
  place-items:center;
  color:var(--muted);
  font-weight:800;
  font-size:12px;
}
.imgBox img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

.btns{
  display:flex;
  flex-direction:column;
  gap:12px;
}
.opt{
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#fff;
  font-weight:800;
  cursor:pointer;
  transition:.15s;
}
.opt:hover{
  background:#fdf2f8;
  transform:scale(1.01);
}
.opt:disabled{
  opacity:.55;
  cursor:not-allowed;
  transform:none;
}

.center{text-align:center;}
.bigTitle{
  font-size:30px;
  font-weight:900;
  color:#be185d;
}
.sub{
  font-size:18px;
  margin-top:8px;
  color:#6b7280;
}

.row{
  display:flex;
  gap:16px;
  justify-content:center;
  margin-top:20px;
}
.yesBtn,.noBtn{
  padding:12px 22px;
  border-radius:14px;
  font-weight:900;
  border:none;
  cursor:pointer;
  color:#fff;
}
.yesBtn{ background:#22c55e; }
.noBtn{ background:#ef4444; }

.note{
  font-size:12px;
  color:var(--muted);
  margin-top:10px;
}
</style>
</head>

<body>

<!-- Floating hearts -->
<span class="heart" style="left:8%;  animation-delay:0s;">üíñ</span>
<span class="heart" style="left:22%; animation-delay:2s;">üíó</span>
<span class="heart" style="left:40%; animation-delay:4s;">üíï</span>
<span class="heart" style="left:60%; animation-delay:1s;">üíì</span>
<span class="heart" style="left:78%; animation-delay:3s;">üíû</span>
<span class="heart" style="left:92%; animation-delay:5s;">üíò</span>

<div class="wrap">
  <div class="topbar">
    <div class="scorebar" id="scorebar">Score: 0/4</div>
    <button class="musicBtn" id="musicBtn">‚ñ∂ Music</button>
  </div>

  <div class="card">
    <div class="msg" id="msg"></div>
    <div id="screen"></div>
  </div>
</div>

<!-- Background music (Pixabay direct link) -->
<audio id="bgm" loop preload="auto">
  <source src="https://cdn.pixabay.com/audio/2024/12/18/audio_6dc9c1487a.mp3" type="audio/mpeg">
</audio>

<script>
/** Files */
const photoFile = "PHOTO-2026-02-09-22-27-35.jpg"; // put your couple photo as photo.jpg in same repo folder as index.html

/** Correct answers */
const correctAnswers = {
  q1:"05/11",
  q2:"Roses",
  q3:"Elevator",
  q4:"Paris"
};

/** Questions (personalized) */
const questions = [
  {
    id:"q1",
    text:"When did I first fall for you? üíï",
    options:["05/11","11/05","05/01","I don't remember ü•∫"],
    good:"Awww ‚ù§Ô∏è You remembered!",
    bad:"No no üòÑ One more chance‚Ä¶"
  },
  {
    id:"q2",
    text:"What did I gift you on our first meet? üåπ",
    options:["Roses","Chocolates","Watch","Nothing üòÖ"],
    good:"Correct üåπ",
    bad:"üò° Wrong! One more chance‚Ä¶"
  },
  {
    id:"q3",
    text:"Where was our first kiss? üòè",
    options:["Car","Elevator","Parking","Secret üôà"],
    good:"Ohooo üíã",
    bad:"üëÄ Wrong guess‚Ä¶ try again"
  },
  {
    id:"q4",
    text:"Where are we going first in Europe? ‚úàÔ∏è",
    options:["Paris","Rome","Amsterdam","Zurich"],
    good:"Paris it is üíï",
    bad:"Hamayya üòÑ pick again",
    showImage:true
  }
];

let score = 0;
let index = 0;

// attempts per question: 0 = first try, 1 = second try used
const attempts = Object.fromEntries(questions.map(q => [q.id, 0]));

const screen   = document.getElementById("screen");
const msg      = document.getElementById("msg");
const scorebar = document.getElementById("scorebar");

/** Message banner */
function showMsg(text, type){
  msg.className = "msg " + type;
  msg.textContent = text;
  msg.classList.add("show");
  setTimeout(() => msg.classList.remove("show"), 1200);
}
function clearMsg(){
  msg.className = "msg";
  msg.textContent = "";
  msg.classList.remove("show");
}

/** Render */
function render(){
  scorebar.textContent = `Score: ${score}/4`;
  clearMsg();

  const q = questions[index];

  const imgHtml = q.showImage ? `
    <div class="imgBox">
      <img src="${photoFile}" alt="photo"
        onerror="this.style.display='none'; this.parentElement.textContent='(Add photo.jpg in repo to show image)'"/>
    </div>` : ``;

  screen.innerHTML = `
    <h2>${escapeHtml(q.text)}</h2>
    ${imgHtml}
    <div class="btns">
      ${q.options.map(o => `<button class="opt" data-opt="${escapeHtml(o)}">${escapeHtml(o)}</button>`).join("")}
    </div>
    <div class="note center">${index+1}/${questions.length}</div>
  `;

  document.querySelectorAll(".opt").forEach(btn => {
    btn.onclick = () => onPick(btn);
  });
}

/** Handle option click with "second chance" logic */
function onPick(btn){
  const q = questions[index];
  const chosen = btn.getAttribute("data-opt");
  const correct = correctAnswers[q.id];

  if (chosen === correct){
    // add score ONLY if correct on first try
    if (attempts[q.id] === 0) score += 1;
    showMsg(q.good, "good");
    goNext(650);
    return;
  }

  // wrong
  if (attempts[q.id] === 0){
    // First wrong ‚Üí give another chance, disable that wrong option
    attempts[q.id] = 1;
    btn.disabled = true;
    showMsg(q.bad, "bad");
    return; // stay on same question
  }

  // Second wrong ‚Üí move on (no score)
  showMsg("Okay okay üòÑ next one‚Ä¶", "bad");
  goNext(650);
}

function goNext(delay){
  setTimeout(() => {
    index++;
    if (index < questions.length) render();
    else result();
  }, delay);
}

/** Result */
function result(){
  scorebar.textContent = `Score: ${score}/4`;
  screen.innerHTML = `
    <div class="center">
      <div class="bigTitle">You're My Valentine üíñ</div>
      <div class="sub">Thank you for choosing me ‚ù§Ô∏è</div>
      <button class="opt" id="continue">Continue</button>
      <div class="note">Now one last thing‚Ä¶</div>
    </div>
  `;
  document.getElementById("continue").onclick = gate;
}

/** Valentine Gate */
function gate(){
  clearMsg();
  screen.innerHTML = `
    <div class="center">
      <div class="bigTitle">Will you be my Valentine? üíç</div>
      <div class="row">
        <button class="yesBtn" id="yes">YES</button>
        <button class="noBtn" id="no">NO</button>
      </div>
      <div class="note">(There is only one correct answer üòå)</div>
    </div>
  `;

  document.getElementById("no").onclick = () => {
    showMsg("‚ùå Invalid choice.\nSystem has detected you are already my Valentine. ‚ù§Ô∏è", "error");
  };

  document.getElementById("yes").onclick = () => {
    showMsg("üíñ YAYYYY üíñ", "good");
    setTimeout(() => {
      screen.innerHTML = `
        <div class="center">
          <div class="bigTitle">Forever Us ‚ù§Ô∏è</div>
          <div class="sub">Screenshot this & send it to me üòò</div>
          <div class="note">P.S. First gift after this quiz = a watch ‚åöüòâ</div>
        </div>
      `;
    }, 700);
  };
}

/** Escape HTML */
function escapeHtml(str){
  return String(str)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

/** Music control */
const bgm = document.getElementById("bgm");
const musicBtn = document.getElementById("musicBtn");
let musicOn = false;

// lower volume so it feels like background
bgm.volume = 0.25;

musicBtn.onclick = async () => {
  try {
    if (!musicOn){
      await bgm.play(); // requires user click (this is the click)
      musicOn = true;
      musicBtn.textContent = "‚è∏ Music";
      showMsg("Music on üé∂", "good");
    } else {
      bgm.pause();
      musicOn = false;
      musicBtn.textContent = "‚ñ∂ Music";
      showMsg("Music off", "bad");
    }
  } catch (e){
    showMsg("Music couldn't play on this browser.\nTry tapping again or use Chrome.", "bad");
  }
};

// Start app
render();
</script>

</body>
</html>
