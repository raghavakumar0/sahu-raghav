<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>My Valentine üíñ</title>

<style>
:root{
  --pink:#ec4899;
  --bg1:#fde7f3;
  --bg2:#fbcfe8;
  --card:#fffafc;
  --muted:#6b7280;
  --border:#f3c1d9;
  --goodBg:#fff;
  --goodBorder:#f472b6;
  --goodText:#be185d;
  --badBg:#fff;
  --badBorder:#fb7185;
  --badText:#7c2d12;
}

*{ box-sizing:border-box; font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial; }

body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  padding:18px;
  overflow:hidden;
  position:relative;
}

/* ‚úÖ Blurred couple photo background layer */
.bgPhoto{
  position:fixed;
  inset:0;
  background-image: var(--bg-photo-url);
  background-size: cover;
  background-position: center;
  filter: blur(10px) brightness(0.85) saturate(1.2);
  transform: scale(1.15);
  opacity: .85;          /* Much stronger */
  z-index:-3;
}

/* Softer romantic overlay */
.bgGradient{
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,.35), transparent 40%),
    radial-gradient(circle at 80% 10%, rgba(255,255,255,.25), transparent 35%),
    linear-gradient(135deg, rgba(253,231,243,.35), rgba(251,207,232,.35));
  z-index:-2;
}

/* Floating hearts */
.heart{
  position:fixed;
  color:#f472b6;
  font-size:18px;
  animation: float 9s linear infinite;
  opacity:.55;
  user-select:none;
  z-index:-1;
}
@keyframes float{
  from{ transform:translateY(110vh) translateX(0); }
  to{ transform:translateY(-10vh) translateX(22px); }
}

.wrap{ width:min(640px,100%); }

.topbar{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  margin-bottom:14px;
}

.scorebar{
  flex:1;
  background:#fff;
  border-radius:999px;
  padding:10px 12px;
  text-align:center;
  font-weight:900;
  color:var(--pink);
  border:1px solid var(--border);
}

/* Music button */
.musicBtn{
  background:#fff;
  border:1px solid var(--border);
  border-radius:999px;
  padding:10px 12px;
  font-weight:900;
  cursor:pointer;
  color:#be185d;
  white-space:nowrap;
}
.musicBtn:active{ transform:scale(.98); }

.card{
  background:var(--card);
  border-radius:22px;
  padding:18px;
  box-shadow:0 20px 45px rgba(236,72,153,.22);
  border:1px solid var(--border);
  position:relative;
  overflow:hidden;
}

/* Message banner ABOVE question */
.msg{
  width:100%;
  border-radius:16px;
  padding:12px 14px;
  font-weight:900;
  text-align:center;
  margin-bottom:12px;
  opacity:0;
  transform: translateY(-4px);
  transition: .18s ease;
  border:2px solid transparent;
  white-space: pre-line;
}
.msg.show{ opacity:1; transform: translateY(0); }
.msg.good{ background:var(--goodBg); color:var(--goodText); border-color:var(--goodBorder); }
.msg.bad{ background:var(--badBg); color:var(--badText); border-color:var(--badBorder); }

h2{
  text-align:center;
  font-size:24px;
  color:#be185d;
  margin: 4px 0 12px;
}

.imgBox{
  width:230px;
  height:230px;
  margin:14px auto;
  border-radius:18px;
  overflow:hidden;
  border:2px solid #f9a8d4;
  background:#fff;
  display:grid;
  place-items:center;
  color:var(--muted);
  font-weight:800;
  font-size:12px;
}
.imgBox img{ width:100%; height:100%; object-fit:cover; display:block; }

.btns{ display:flex; flex-direction:column; gap:12px; }
.opt{
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#fff;
  font-weight:800;
  cursor:pointer;
  transition:.15s;
}
.opt:hover{ background:#fdf2f8; transform:scale(1.01); }
.opt:disabled{ opacity:.55; cursor:not-allowed; transform:none; }

.center{text-align:center;}
.bigTitle{ font-size:30px; font-weight:900; color:#be185d; }
.sub{ font-size:18px; margin-top:8px; color:#6b7280; }

.row{
  display:flex;
  gap:16px;
  justify-content:center;
  margin-top:20px;
  position:relative;
  min-height:56px;
}
.yesBtn,.noBtn{
  padding:12px 22px;
  border-radius:14px;
  font-weight:900;
  border:none;
  cursor:pointer;
  color:#fff;
  box-shadow:0 10px 22px rgba(0,0,0,.12);
}
.yesBtn{ background:#22c55e; }
.noBtn{ background:#ef4444; position:absolute; }

.note{ font-size:12px; color:var(--muted); margin-top:10px; }
</style>
</head>
<body>

<!-- ‚úÖ Blurred background photo + gradient overlay -->
<div class="bgPhoto" id="bgPhoto"></div>
<div class="bgGradient"></div>

<!-- Floating hearts -->
<span class="heart" style="left:8%;  animation-delay:0s;">üíñ</span>
<span class="heart" style="left:22%; animation-delay:2s;">üíó</span>
<span class="heart" style="left:40%; animation-delay:4s;">üíï</span>
<span class="heart" style="left:60%; animation-delay:1s;">üíì</span>
<span class="heart" style="left:78%; animation-delay:3s;">üíû</span>
<span class="heart" style="left:92%; animation-delay:5s;">üíò</span>

<div class="wrap">
  <div class="topbar">
    <div class="scorebar" id="scorebar">Score: 0/4</div>
    <button class="musicBtn" id="musicBtn">‚ñ∂ Music</button>
  </div>

  <div class="card" id="card">
    <div class="msg" id="msg"></div>
    <div id="screen"></div>
  </div>
</div>

<!-- Music -->
<audio id="bgm" loop preload="auto">
  <source src="https://cdn.pixabay.com/audio/2024/12/18/audio_6dc9c1487a.mp3" type="audio/mpeg">
</audio>

<script>
/** ‚úÖ Put your couple photo as bg.jpg in the repo root (same folder as index.html) */
const backgroundPhotoFile = "bg.JPG";  // change if your file name differs
document.documentElement.style.setProperty("--bg-photo-url", `url('${backgroundPhotoFile}')`);

const photoFile = "PHOTO-2026-02-09-22-27-35.jpg"; // your photo for the photo question (must exist in repo root)

/** Correct answers */
const correctAnswers = {
  q1:"26 April 2025",
  q2:"Roses",
  q3:"Elevator",
  q4:"Paris"
};

/** Questions */
const questions = [
  {
    id:"q1",
    text:"When did I first fall for you? üíï",
    options:["11 May 2025","26 April 2025","14 April 2025","I don't remember ü•∫"],
    good:"Awww ‚ù§Ô∏è You remembered! counrty club roje padipoya :p",
    bad:"No no üòÑ One more chance‚Ä¶ What Sahu idhi teledha?"
  },
  {
    id:"q2",
    text:"What did I gift you on our first meet? üåπ",
    options:["Roses","Chocolates","Watch","Nothing üòÖ"],
    good:"Correct üåπ Eesari bouquet istha",
    bad:"üò° Anthele maavenduk gurhuntayandi‚Ä¶"
  },
  {
    id:"q3",
    text:"Where was our first kiss? üòè",
    options:["Car","Elevator","Parking","Theatre üôà"],
    good:"Ohooo üíã cheek meedha icha gurtunda madam",
    bad:"üëÄ Wrong guess‚Ä¶ try again mana first kiss re eddi"
  },
  {
    id:"q4",
    text:"Where are we going first in Europe? ‚úàÔ∏è",
    options:["Paris","Rome","Amsterdam","Zurich"],
    good:"Paris it is üíï Hammaya gurtundhi",
    bad:"Ayya wrong üòÑ pick again",
    showImage:true
  }
];

let score = 0;
let index = 0;

/** attempts per question: 0 = first try, 1 = second try used */
const attempts = Object.fromEntries(questions.map(q => [q.id, 0]));

const screen   = document.getElementById("screen");
const msg      = document.getElementById("msg");
const scorebar = document.getElementById("scorebar");
const card     = document.getElementById("card");

/** ‚úÖ Prompt display durations */
const MSG_DURATION_MS = 2800;      // stays longer so she can read
const NEXT_DELAY_MS = 1100;        // delay before moving next (separate from msg)

let msgTimer = null;
function showMsg(text, type, durationMs = MSG_DURATION_MS){
  if (msgTimer) clearTimeout(msgTimer);
  msg.className = "msg " + type;
  msg.textContent = text;
  msg.classList.add("show");
  msgTimer = setTimeout(() => msg.classList.remove("show"), durationMs);
}

function clearMsg(){
  if (msgTimer) clearTimeout(msgTimer);
  msg.className = "msg";
  msg.textContent = "";
  msg.classList.remove("show");
}

/** Render */
function render(){
  scorebar.textContent = `Score: ${score}/4`;
  clearMsg();

  const q = questions[index];

  const imgHtml = q.showImage ? `
    <div class="imgBox">
      <img src="${photoFile}" alt="photo"
        onerror="this.style.display='none'; this.parentElement.textContent='(Photo not found. Upload it to repo root.)'"/>
    </div>` : ``;

  screen.innerHTML = `
    <h2>${escapeHtml(q.text)}</h2>
    ${imgHtml}
    <div class="btns">
      ${q.options.map(o => `<button class="opt" data-opt="${escapeHtml(o)}">${escapeHtml(o)}</button>`).join("")}
    </div>
    <div class="note center">${index+1}/${questions.length}</div>
  `;

  document.querySelectorAll(".opt").forEach(btn => {
    btn.onclick = () => onPick(btn);
  });
}

/** Handle option click with "second chance" logic */
function onPick(btn){
  const q = questions[index];
  const chosen = btn.getAttribute("data-opt");
  const correct = correctAnswers[q.id];

  if (chosen === correct){
    // add score ONLY if correct on first try
    if (attempts[q.id] === 0) score += 1;

    showMsg(q.good, "good");

    // wait a bit so message is readable, then go next
    goNext(NEXT_DELAY_MS);
    return;
  }

  // wrong
  if (attempts[q.id] === 0){
    attempts[q.id] = 1;
    btn.disabled = true; // remove that choice so she can't pick it again
    showMsg(q.bad, "bad");
    return; // stay on same question
  }

  // Second wrong ‚Üí move on (no score)
  showMsg("Okay okay üòÑ next one‚Ä¶", "bad");
  goNext(NEXT_DELAY_MS);
}

function goNext(delay){
  setTimeout(() => {
    index++;
    if (index < questions.length) render();
    else result();
  }, delay);
}

/** Result */
function result(){
  scorebar.textContent = `Score: ${score}/4`;
  clearMsg();
  screen.innerHTML = `
    <div class="center">
      <div class="bigTitle">You're My Valentine üíñ</div>
      <div class="sub">Thank you for choosing me ‚ù§Ô∏è</div>
      <button class="opt" id="continue">Continue</button>
      <div class="note">Now one last thing‚Ä¶</div>
    </div>
  `;
  document.getElementById("continue").onclick = gate;
}

/** Valentine Gate (NO keeps moving, cannot be clicked) */
function gate(){
  clearMsg();
  screen.innerHTML = `
    <div class="center">
      <div class="bigTitle">Will you be my Valentine? üíç</div>
      <div class="row" id="row">
        <button class="yesBtn" id="yes">YES</button>
        <button class="noBtn" id="no">NO</button>
      </div>
      <div class="note">I dare you to click NO üòà</div>
    </div>
  `;

  const yes = document.getElementById("yes");
  const no  = document.getElementById("no");
  const row = document.getElementById("row");

  // Place NO initially
  moveNo();

  function moveNo(){
    const rowRect = row.getBoundingClientRect();
    const noRect  = no.getBoundingClientRect();

    const maxX = Math.max(0, rowRect.width  - noRect.width  - 8);
    const maxY = Math.max(0, rowRect.height - noRect.height - 8);

    const x = Math.floor(Math.random() * (maxX + 1));
    const y = Math.floor(Math.random() * (maxY + 1));

    no.style.left = x + "px";
    no.style.top  = y + "px";
  }

  function dodge(){
    moveNo();
  }

  // NO cannot be selected: it dodges on hover & click
  no.addEventListener("mouseenter", dodge);
  no.addEventListener("touchstart", dodge, { passive: true });
  no.addEventListener("click", (e) => { e.preventDefault(); dodge(); });

  yes.onclick = () => {
  showMsg("üíñ YAYYYY üíñ", "good", 4500);

  setTimeout(() => {
    screen.innerHTML = `
      <div class="center">
        <div class="bigTitle">Forever Us ‚ù§Ô∏è</div>
        <div class="sub">Now tell me‚Ä¶ what gift do you want? üòå</div>

        <div style="margin-top:18px;">
          <input id="giftInput" 
            placeholder="Type your dream gift here üíù"
            style="
              padding:12px;
              width:90%;
              max-width:320px;
              border-radius:12px;
              border:1px solid #f3c1d9;
              font-weight:600;
              outline:none;
              text-align:center;
              background:#fff;
            ">
        </div>

        <div style="margin-top:14px;">
          <button id="sendGift"
            style="
              padding:12px 20px;
              border-radius:14px;
              border:none;
              background:#ec4899;
              color:white;
              font-weight:900;
              cursor:pointer;
              box-shadow:0 8px 18px rgba(236,72,153,.3);
            ">
            Send Gift Wish üíå
          </button>
        </div>

        <div class="note">Choose wisely‚Ä¶ I‚Äôm watching üòè</div>
      </div>
    `;

    document.getElementById("sendGift").onclick = () => {
      const gift = document.getElementById("giftInput").value.trim();

      if (!gift) {
        showMsg("You must choose something first üòå", "bad");
        return;
      }

      const email = "raghavakumar.0@gmail.com";
      const subject = encodeURIComponent("My Valentine Gift Wish üíù");
      const body = encodeURIComponent(
        "Hi ‚ù§Ô∏è,\n\nFor Valentine's Day, I want:\n\n" +
        gift +
        "\n\nNow don‚Äôt say no üòåüíò"
      );

      window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
    };

  }, 1200);
};


/** Escape HTML */
function escapeHtml(str){
  return String(str)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

/** Music control */
const bgm = document.getElementById("bgm");
const musicBtn = document.getElementById("musicBtn");
let musicOn = false;
bgm.volume = 0.25;

musicBtn.onclick = async () => {
  try {
    if (!musicOn){
      await bgm.play();
      musicOn = true;
      musicBtn.textContent = "‚è∏ Music";
      showMsg("Music on üé∂", "good");
    } else {
      bgm.pause();
      musicOn = false;
      musicBtn.textContent = "‚ñ∂ Music";
      showMsg("Music off", "bad");
    }
  } catch (e){
    showMsg("Music couldn't play.\nTry tapping again or use Chrome.", "bad");
  }
};

// Start app
render();
</script>

</body>
</html>
